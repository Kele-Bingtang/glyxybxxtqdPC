(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"333d":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-pagination",{attrs:{"current-page":t.paging.currentPage,"page-sizes":t.paging.pagesizes,"page-size":t.paging.pagesize,layout:t.layout,background:t.background,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},a=[],n=(i("c5f6"),i("09f4")),o={name:"Pagination",props:{total:{type:Number,default:0},paging:{type:Object,default:function(){return{currentPage:1,pagesizes:[10,20,50,100,200],pagesize:50}}},autoScroll:{type:Boolean,default:!0},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},data:function(){return{}},methods:{handleSizeChange:function(t){var e=this;this.paging.pagesize=t,this.$emit("pagination",this.paging),this.$nextTick((function(){e.autoScroll&&Object(n["a"])("el-table__body-wrapper",0,200)}))},handleCurrentChange:function(t){var e=this;this.paging.currentPage=t,this.$emit("pagination",this.paging),this.$nextTick((function(){e.autoScroll&&Object(n["a"])("el-table__body-wrapper",0,200)}))}}},l=o,r=i("2877"),c=Object(r["a"])(l,s,a,!1,null,null,null);e["a"]=c.exports},"3a91":function(t,e,i){},"851d":function(t,e,i){"use strict";i("3a91")},eeb4:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{staticClass:"bxd-dialog",attrs:{title:"报修单详情",visible:t.innerVisible,width:"60%",top:"40px",center:""},on:{"update:visible":function(e){t.innerVisible=e}}},[t.showInfo?i("el-form",{staticClass:"bxd-detail-form",attrs:{inline:!0,"label-position":"left","label-width":"110px"}},[i("el-form-item",{staticClass:"qrcode-form-item",attrs:{"label-width":"0px"}},[i("div",{staticClass:"qrcode",attrs:{id:"qrcode"}}),t._v(" "),i("div",{staticClass:"qrcode-text",staticStyle:{"word-break":"keep-all"}},[t._v("请使用"),i("span",{staticStyle:{color:"red"}},[t._v("微信")]),t._v("扫码查看维修详情")]),t._v(" "),i("div",{staticStyle:{"word-break":"keep-all"}},[i("span",[t._v("二维码张贴地址："+t._s(t.info.ewmdd))])])]),t._v(" "),i("div",{staticClass:"gap"}),t._v(" "),i("el-form-item",{staticClass:"steps-form-item"},[t.info.step?i("el-steps",{staticClass:"progress-steps",attrs:{active:t.info.step.active,space:120,direction:"vertical","process-status":"finish","finish-status":"success"}},t._l(t.info.step.steps,(function(e,s){return i("el-step",{key:s,staticClass:"progress-step"},[i("div",{staticClass:"title",attrs:{slot:"title"},domProps:{innerHTML:t._s(e.title)},slot:"title"}),t._v(" "),i("div",{attrs:{slot:"description"},slot:"description"},[i("div",{staticClass:"date"},[t._v(t._s(e.time))]),t._v(" "),i("div",{staticClass:"desc",domProps:{innerHTML:t._s(e.desc)}})])])})),1):t._e()],1),t._v(" "),i("div",{staticClass:"gap"},[t._v("报修单")]),t._v(" "),i("div",{staticClass:"content"},[i("el-form-item",{attrs:{label:"报修单号:"}},[i("span",[t._v(t._s(t.info.id))])]),t._v(" "),i("el-form-item",{attrs:{label:"校 区:"}},[i("span",[t._v(t._s(t.info.xq))])]),t._v(" "),i("el-form-item",{attrs:{label:"区 域:"}},[i("span",[t._v(t._s(t.info.qy))])]),t._v(" "),i("el-form-item",{attrs:{label:"报修位置:"}},[i("span",[t._v(t._s(t.info.xxdd))])]),t._v(" "),i("el-form-item",{attrs:{label:"报修类别:"}},[i("span",[t._v(t._s(t.info.bxlb))])]),t._v(" "),i("el-form-item",{attrs:{label:"报修内容:"}},[i("span",[t._v(t._s(t.info.bxnr))])]),t._v(" "),i("el-form-item",{attrs:{label:"报修时间:"}},[i("span",[t._v(t._s(t._f("dateformat")(t.info.sbsj,t.format)))])]),t._v(" "),i("el-form-item",{attrs:{label:"预约时间:"}},[i("span",[t._v(t._s(t.info.yysj))])]),t._v(" "),i("br"),t._v(" "),i("el-form-item",{staticClass:"hc-item-style",attrs:{label:"耗材:"}},t._l(t.info.hc.trim().split("="),(function(e,s){return""!=t.info.hc?i("p",{key:s,staticClass:"hcStyle",staticStyle:{"margin-top":"-3px"}},[t._v(t._s(s+1)+"、"+t._s(e))]):t._e()})),0),t._v(" "),i("br"),t._v(" "),i("el-form-item",{attrs:{label:"工时(小时):"}},[i("span",[t._v(t._s(t.info.gs))])]),t._v(" "),i("el-form-item",{staticClass:"tp-form-item",attrs:{label:"相关图片:"}},t._l(t.info.images,(function(e,s){return i("el-image",{key:s,staticClass:"info-image",attrs:{src:e,fit:"cover"},on:{click:function(e){return t.onImageClick(s)}}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])})),1),t._v(" "),i("div",{staticClass:"gap"},[t._v("申报人")]),t._v(" "),i("el-form-item",{attrs:{label:"姓名:"}},[i("span",[t._v(t._s(t.info.sbr)+"\n      ")])]),t._v(" "),i("el-form-item",{attrs:{label:"申报人手机:"}},[i("span",[t._v(t._s(t.info.sbrsj))])]),t._v(" "),i("el-form-item",{attrs:{label:"申报人学号:"}},[i("span",[t._v(t._s(t.info.sbrxh))])]),t._v(" "),i("div",{staticClass:"gap"},[t._v("接单人")]),t._v(" "),i("el-form-item",{attrs:{label:"姓名:"}},[i("span",[t._v(t._s(t.info.j&&t.info.j.xm))])]),t._v(" "),i("el-form-item",{attrs:{label:"工号:"}},[i("span",[t._v(t._s(t.info.j&&t.info.j.gh))])]),t._v(" "),i("el-form-item",{attrs:{label:"手 机:"}},[i("span",[t._v(t._s(t.info.j&&t.info.j.sj))])]),t._v(" "),i("el-form-item",{attrs:{label:"邮 箱:"}},[i("span",[t._v(t._s(t.info.j&&t.info.j.yx))])]),t._v(" "),i("el-form-item",{attrs:{label:"服务星级:"}},[2===t.info.state||4===t.info.state?[t.info.j&&t.info.pj?i("el-rate",{attrs:{disabled:"","show-text":"",max:t.max,texts:t.evaluate,"text-color":"#ff9900"},model:{value:t.info.pj,callback:function(e){t.$set(t.info,"pj",e)},expression:"info.pj"}}):t._e()]:t._e()],2),t._v(" "),i("el-form-item",{staticClass:"evaluate-form-item",attrs:{label:"服务评价:"}},[2===t.info.state||4===t.info.state?[t.info.j&&t.info.pj&&t.info.pjnr?i("span",[t._v(t._s(t.info.pjnr))]):t.info.j&&t.info.pj&&!t.info.pjnr?i("span",[t._v("无")]):!t.info.j||t.info.pj||t.info.pjnr?t._e():i("span",[t._v("暂未评价")])]:t._e()],2),t._v(" "),i("div",{staticClass:"gap"},[t._v("审核员1")]),t._v(" "),i("el-form-item",{attrs:{label:"姓名:"}},[i("span",[t._v(t._s(t.info.s1&&t.info.s1.xm))])]),t._v(" "),i("el-form-item",{attrs:{label:"工号:"}},[i("span",[t._v(t._s(t.info.s1&&t.info.s1.gh))])]),t._v(" "),i("el-form-item",{attrs:{label:"审核状态:"}},[i("el-tag",{attrs:{type:t.info.shy1tag}},[t._v(t._s(t.info.shy1text))])],1),t._v(" "),i("div",{staticClass:"gap"},[t._v("审核员2")]),t._v(" "),i("el-form-item",{attrs:{label:"姓名:"}},[i("span",[t._v(t._s(t.info.s2&&t.info.s2.xm))])]),t._v(" "),i("el-form-item",{attrs:{label:"工号:"}},[i("span",[t._v(t._s(t.info.s2&&t.info.s2.gh))])]),t._v(" "),i("el-form-item",{attrs:{label:"审核状态:"}},[i("el-tag",{attrs:{type:t.info.shy2tag}},[t._v(t._s(t.info.shy2text))])],1)],1)],1):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"success",disabled:4!==t.info.state,plain:""},on:{click:t.handleExport}},[t._v("导 出")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleClose}},[t._v("关 闭")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"image-dialog",attrs:{visible:t.isShowImageDialog,top:"120px",width:"860px",modal:!0},on:{"update:visible":function(e){t.isShowImageDialog=e}}},[i("div",{staticClass:"image-dialog-carousel"},[i("el-carousel",{key:t.randKey,attrs:{"initial-index":t.initialIndex,autoplay:!1,"indicator-position":"outside"}},t._l(t.info.images,(function(t,e){return i("el-carousel-item",{key:e},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%",margin:"0 auto"},attrs:{src:t}})])})),1)],1)])],1)},a=[],n=(i("28a5"),i("a481"),i("c5f6"),i("ac6a"),i("456d"),i("5530")),o=i("cf45"),l=i("f121"),r=i("d044"),c=i.n(r),f=i("2f62"),p=i("0369"),m={name:"RepairDetailDialog",props:{visible:{type:Boolean,default:!1},bxdInfo:{type:Object,default:function(){return{}}}},data:function(){return{isShowImageDialog:!1,initialIndex:0,randKey:"",info:"",innerVisible:this.visible,format:"YYYY-MM-DD HH:mm",qrcode:null,evaluate:l["a"].evaluate,shState:l["a"].shState}},computed:Object(n["a"])(Object(n["a"])({},Object(f["b"])(["config"])),{},{max:function(){return l["a"].evaluate.length},showInfo:function(){return Object.keys(this.info).length}}),watch:{visible:function(t,e){t!==e&&(t&&(this.info=this.bxdInfo,this.resetBxdInfo()),this.innerVisible=t)},innerVisible:function(t,e){t!==e&&this.$emit("update:visible",t)}},methods:{resetBxdInfo:function(){Object.keys(this.info).length>0&&(this.formatInfo(),this.createQrcode(),this.clearBxImage(),this.createSteps())},formatInfo:function(){var t=this.info;t.pj=Number(t.pj),t.s1||(t.s1={xm:"--",gh:"--"});var e=this.getShState(t.shy1state);t.shy1tag=e.tag,t.shy1text=e.text,t.s2||(t.s2={xm:"--",gh:"--"});var i=this.getShState(t.shy2state);t.shy2tag=i.tag,t.shy2text=i.text},createQrcode:function(){var t=this,e=l["a"].declareDetailsPath.replace(":id",this.info.id),i="".concat(this.config.bxqtUrl).concat(e);this.$nextTick((function(){t.createQRcode(i)}))},clearBxImage:function(){var t=this;if(this.info.tp.length>0){var e=[],i=this.info.tp.split("|");i.shift(),e=i.map((function(e){return"".concat(t.config.bxdimg,"/").concat(e)})),this.$set(this.info,"images",e)}},createSteps:function(){var t=this,e={active:0,steps:[]},i=Number(this.info.state);function s(){var i=t.$moment(t.info.sbsj).format(t.format);e.steps.push({title:"申报中",time:i,desc:'<span class="name">'.concat(t.info.sbr,"</span>于").concat(i,"提交了维修申报.")})}function a(){var i,s="维修中";if(t.info.j){var a=t.info.j.sj;i=a?'系统已自动派单给维修师傅<span class="name">'.concat(t.info.j.xm,'</span>(<a class="tel" href="tel:').concat(a,'">').concat(a,"</a>)，等待处理..."):'系统已自动派单给维修师傅<span class="name">'.concat(t.info.j.xm,"</span>，等待处理..."),2==t.bxdInfo.state||4==t.bxdInfo.state?(i="当前订单已完成修理，等待验收...",s="已维修"):5==t.bxdInfo.state&&(i="当前订单已完成修理，但验收未通过。",s='<span style="color: red">未通过</span>')}else i="等待管理员指派维修师傅，请耐心等待...";e.steps.push({title:s,time:t.$moment(t.info.sbsj).format(t.format),desc:i})}function n(){e.steps.push({title:"已完成",time:t.info.wxsj?t.$moment(t.info.wxsj).format(t.format):"--",desc:"维修工作已完成，工单结束."})}function o(){e.steps.push({title:"已撤回",time:t.info.wxsj?t.$moment(t.info.wxsj).format(t.format):"--",desc:'申报已撤回，原因：<span class="name">'.concat(t.info.cxsy,"</span>.")})}0===i?(e.active=0,s()):1===i||2===i?(e.active=1,s(),a()):3===i?this.info.j?(e.active=2,s(),a(),o()):(e.active=1,s(),o()):4===i?(e.active=4,s(),a(),n()):5===i&&(e.active=1,s(),a()),this.info=Object.assign({},this.info,{step:e})},handleClose:function(){this.clearQRcode(),this.innerVisible=!1},createQRcode:function(t){this.qrcode?(this.qrcode.clear(),this.qrcode.makeCode(t)):this.qrcode=new c.a("qrcode",{width:140,height:140,text:t,colorDark:"#242424",colorLight:"#fff"})},clearQRcode:function(){this.qrcode&&this.qrcode.clear()},onImageClick:function(t){this.randKey=Object(o["d"])(),this.isShowImageDialog=!0,this.initialIndex=t},getShState:function(t){var e=this.shState.filter((function(e){return e.value===Number(t)}))[0];return e},handleExport:function(){Object(p["a"])(this.info.id)}}},v=m,d=(i("851d"),i("2877")),h=Object(d["a"])(v,s,a,!1,null,null,null);e["a"]=h.exports}}]);
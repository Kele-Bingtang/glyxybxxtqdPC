(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc9cf272"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t,e){document.getElementsByClassName(t)[0].scrollTop=e}function n(t){if(t)return document.getElementsByClassName(t)[0].scrollTop;console.error("scrollTo缺少el对象")}function s(t,e,a,s){var o=n(t),l=e-o;if(0!==l){var c=20,u=0;a="undefined"===typeof a?500:a;var d=function e(){u+=c;var n=Math.easeInOutQuad(u,o,l,a);r(t,n),u<a?i(e):s&&"function"===typeof s&&s()};d()}}},"0cbb":function(t,e,a){"use strict";a("44d8")},"19cb":function(t,e,a){},"32a2":function(t,e,a){"use strict";a("19cb")},"44d8":function(t,e,a){},"456d":function(t,e,a){var i=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(i(t))}}))},"5eda":function(t,e,a){var i=a("5ca1"),r=a("8378"),n=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],s={};s[t]=e(a),i(i.S+i.F*n((function(){a(1)})),"Object",s)}},ca51:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("b775");function r(t){return Object(i["a"])({url:"/AdminServlet",method:"post",data:t})}},cf45:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return o}));a("c5f6");var i=a("5c96");function r(t){t=t||8;for(var e="",a=0;a<t;a++)e+=Math.floor(10*Math.random());return e}function n(t){return t&&JSON.parse(JSON.stringify(t))}function s(t,e){if(e=e||"请求成功！",t.status)if("false"==t.status){var a=Number(t.info);switch(a){case 0:i["Message"].error("未登录授权或无权限！");break;case 1:i["Message"].error("程序错误请刷新！");break;case 2:i["Message"].error("无效参数！");break;case 3:i["Message"].error("缺少传递必要参数！");break;default:i["Message"].error("接口异常，请重试！")}}else i["Message"].success(e);else i["Message"].success(e);return"success"==t.status}function o(t){var e={};for(var a in t)(t[a]||0===t[a])&&(e[a]=t[a]);return e}},e455:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return o}));var i=a("b775");function r(){return Object(i["a"])({url:"/AdminServlet",method:"post",data:{op:"selalljdr"}})}function n(t){return Object(i["a"])({url:"/AdminServlet",method:"post",data:t})}function s(){return Object(i["a"])({url:"/AdminServlet",method:"post",data:{op:"selallshy"}})}function o(t){return Object(i["a"])({url:"/AdminServlet",method:"post",data:t})}},fd9d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main pad10"},[a("div",{staticClass:"main-header"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addJdr}},[t._v("新增审核员")]),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-refresh-right"},on:{click:function(e){return t.refreshJdr("refresh")}}},[t._v("刷新")]),t._v(" "),a("el-input",{staticClass:"el-input-jdr",attrs:{placeholder:"查询：输入姓名、工号","prefix-icon":"el-icon-search",clearable:""},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),t._v(" "),a("div",{ref:"main-content",staticClass:"main-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"jdrTable",staticStyle:{width:"100%","min-width":"1500px"},attrs:{data:t.tableData.slice((t.paging.currentPage-1)*t.paging.pagesize,t.paging.currentPage*t.paging.pagesize),height:t.tableHeight,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"transparent",border:"","highlight-current-row":"","header-row-style":{color:"#01AAED"}}},[a("el-table-column",{attrs:{type:"index",width:"90",label:"#",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xm",label:"姓名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gh",label:"工号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"职务",align:"center",filters:t.job,"filter-method":t.filterJob},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{attrs:{type:t.getJob(i.zw).tag}},[t._v(t._s(t.getJob(i.zw).text))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:function(e){return t.getQdb(i)}}},[t._v("查看签到表")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.updateJdr(i)}}},[t._v("修改信息")]),t._v(" "),a("el-popconfirm",{attrs:{title:"确定删除吗？",placement:"top"},on:{onConfirm:function(e){return t.deleteJdr(i)}}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",plain:"",size:"small"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"main-footer"},[a("pagination",{attrs:{total:t.total,paging:t.paging},on:{pagination:t.handleSizeChange}})],1),t._v(" "),a("el-dialog",{staticClass:"jdr-add-dialog",attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"450px",top:"150px",center:"","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"el-dialog-div"},[a("el-form",{ref:"ruleForm",attrs:{model:t.params,rules:t.rules,"label-position":"top","label-width":"100px","status-icon":""}},[a("el-form-item",{attrs:{label:"审核员姓名",prop:"xm"}},[a("el-input",{attrs:{placeholder:"请填写审核员姓名"},model:{value:t.params.xm,callback:function(e){t.$set(t.params,"xm",e)},expression:"params.xm"}})],1),t._v(" "),"add"===t.dialogType?a("el-form-item",{attrs:{label:"易班id",prop:"ybid"}},[a("el-input",{attrs:{placeholder:"请填写易班id"},model:{value:t.params.ybid,callback:function(e){t.$set(t.params,"ybid",e)},expression:"params.ybid"}})],1):t._e(),t._v(" "),"add"===t.dialogType?a("el-form-item",{attrs:{label:"工号",prop:"gh"}},[a("el-input",{attrs:{placeholder:"请填写工号"},model:{value:t.params.gh,callback:function(e){t.$set(t.params,"gh",e)},expression:"params.gh"}})],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"state-form-item",attrs:{label:"职务",prop:"zw"}},[a("el-select",{attrs:{placeholder:"请选择职务"},model:{value:t.params.zw,callback:function(e){t.$set(t.params,"zw",e)},expression:"params.zw"}},t._l(t.job,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.handleJdrSubmit("ruleForm")}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"qdb-dialog",attrs:{title:t.dialogQdbTitle,visible:t.dialogQdbVisible,width:"900px",top:"90px",center:"","append-to-body":""},on:{"update:visible":function(e){t.dialogQdbVisible=e}}},[a("div",{staticClass:"el-dialog-div"},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.qdblist,height:t.qdbTableHeight,"empty-text":"无签到记录",border:""}},[a("el-table-column",{attrs:{prop:"shyid",label:"易班id",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xq",label:"签到校区",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"签到(退)时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(t._f("dateformat")(i.qdsj)))]),t._v(" "),"1"==i.state?a("el-tag",{attrs:{type:"success"}},[t._v("签到")]):a("el-tag",{attrs:{type:"danger"}},[t._v("签退")])]}}])})],1),t._v(" "),a("div",{staticStyle:{color:"#409EFF","font-size":"13px",padding:"10px"}},[t._v("默认查询最近30天签到记录")])],1)])],1)},r=[],n=(a("c5f6"),a("ac6a"),a("456d"),a("5530")),s=a("e455"),o=a("eb09"),l=a("cf45"),c=a("f121"),u=a("333d"),d=a("ca51"),f=a("2f62"),p={name:"Checker",components:{Pagination:u["a"]},data:function(){return{switchAutoMonior:!0,timer:null,loading:!1,tableHeight:null,jdrData:[],qdblist:[],searchVal:"",paging:Object(l["a"])(c["a"].paging),job:c["a"].job,dialogVisible:!1,dialogTitle:"",dialogType:"",dialogQdbTitle:"",dialogQdbVisible:!1,qdbTableHeight:700,params:{op:"",xm:"",ybid:"",gh:"",zw:"",del:""},qdbParams:{op:"selqdb",shyid:"",num:""},rules:{xm:{required:!0,message:"必填项",trigger:["blur","change"]},ybid:{required:!0,message:"必填项",trigger:["blur","change"]},gh:{required:!0,message:"必填项",trigger:["blur","change"]},zw:{required:!0,message:"必填项",trigger:["blur","change"]}}}},computed:Object(n["a"])(Object(n["a"])({},Object(f["b"])(["config"])),{},{total:function(){return this.tableData.length},tableData:function(){var t=this.searchVal;return t?this.jdrData.filter((function(e){return Object.keys(e).some((function(a){if("xm"===a||"gh"===a)return String(e[a]).toLowerCase().indexOf(t)>-1}))})):this.jdrData}}),mounted:function(){this.tableHeight=this.$refs["main-content"].offsetHeight,this.getJdrList(),this.autoMonitor()},methods:{autoMonitor:function(){this.stopMonitor(),this.switchAutoMonior&&this.config.shytime&&(this.timer=setInterval(this.queryData,1e3*this.config.shytime))},stopMonitor:function(){clearInterval(this.timer),this.timer=null},handleMonitorSwitch:function(){this.switchAutoMonior?(this.autoMonitor(),this.$message.success("自动监测已开启")):(this.stopMonitor(),this.$message.success("自动监测已关闭"))},queryData:function(){Object(o["c"])()},getJdrList:function(t){var e=this;this.loading=!0,Object(s["a"])().then((function(a){e.loading=!1,e.jdrData=a.obj.slist,t&&e.$message.success("刷新成功")})).catch((function(){e.loading=!1,e.jdrData=[],e.$message.error("数据获取失败，请检查接口")}))},filterParams:function(t){var e={};for(var a in t)(t[a]||0===t[a])&&(e[a]=t[a]);return e},resetParams:function(){for(var t in this.params)this.params[t]=""},resetForm:function(t){this.$refs[t].resetFields()},addJdr:function(){var t=this;this.dialogType="add",this.dialogTitle="添加审核员",this.dialogVisible=!0,this.$nextTick((function(){t.resetParams(),t.resetForm("ruleForm")}))},updateJdr:function(t){var e=this;this.dialogType="update",this.dialogTitle="修改审核员信息",this.dialogVisible=!0,this.$nextTick((function(){e.resetForm("ruleForm"),e.params["op"]="uppeople",e.params["shyid"]=t.ybid,e.params.xm=t.xm,e.params.zw=Number(t.zw),e.params.ybid="",e.params.gh=""}))},deleteJdr:function(t){var e=this,a={op:"uppeople",shyid:t.ybid,del:1};Object(s["d"])(this.filterParams(a)).then((function(t){"success"===t.status?e.$message.success("删除成功"):e.$message.error("删除失败，请重试"),e.refreshJdr()})).catch((function(){e.$message.error("删除失败，请重试")}))},handleJdrSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;"add"===e.dialogType?e.handleJdrAdd():"update"===e.dialogType&&e.handleJdrUpdate()}))},refreshJdr:function(t){t&&(this.searchVal="",this.clearFilter()),this.getJdrList(t)},handleJdrAdd:function(){var t=this;this.searchVal="",this.params["op"]="newpeople",Object(s["d"])(this.filterParams(this.params)).then((function(e){"success"===e.status?(t.$message.success("添加成功"),t.dialogVisible=!1):t.$message.error("添加失败，请重试"),t.refreshJdr()})).catch((function(){t.$message.error("添加失败，请重试")}))},handleJdrUpdate:function(){var t=this;Object(s["d"])(this.filterParams(this.params)).then((function(e){"success"===e.status?(t.$message.success("修改成功"),t.dialogVisible=!1):t.$message.error("修改失败，请重试"),t.refreshJdr()})).catch((function(){t.$message.error("修改失败，请重试")}))},handleSizeChange:function(t){this.paging.currentPage=t.currentPage,this.paging.pagesize=t.pagesize},getJob:function(t){var e=this.job.filter((function(e){return e.value==t}));return e&&e[0]},filterJob:function(t,e){return e.zw==t},clearFilter:function(){this.$refs.jdrTable.clearFilter()},getQdb:function(t){var e=this,a=t.xm,i=t.gh,r=t.ybid;this.dialogQdbVisible=!0,this.dialogQdbTitle="".concat(a,"(").concat(i,") -- 签到表"),this.qdbParams["shyid"]=r;var n=this.filterParams(this.qdbParams);this.$nextTick((function(){Object(d["a"])(n).then((function(t){t.obj.qdblist?e.qdblist=t.obj.qdblist:Object(l["c"])(t)}))}))}},activated:function(){this.autoMonitor()},beforeRouteLeave:function(t,e,a){this.stopMonitor(),a()}},h=p,g=(a("0cbb"),a("32a2"),a("2877")),b=Object(g["a"])(h,i,r,!1,null,"cfa1f706",null);e["default"]=b.exports}}]);